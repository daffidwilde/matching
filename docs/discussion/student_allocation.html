<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>matching – student_allocation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar docked nav-fixed">


<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">matching</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../docs/tutorials/index.html" rel="" target="">
 <span class="menu-text">tutorials</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/how-to/index.html" rel="" target="">
 <span class="menu-text">how-to guides</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../docs/discussion/index.html" rel="" target="" aria-current="page">
 <span class="menu-text">discussion</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/reference/index.html" rel="" target="">
 <span class="menu-text">reference</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../docs/citation.html" rel="" target="">
 <span class="menu-text">citations</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/contributing.html" rel="" target="">
 <span class="menu-text">contributing</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../docs/bibliography.html" rel="" target="">
 <span class="menu-text">bibliography</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/daffidwilde/matching" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://doi.org/10.21105/joss.02169" rel="" target=""><i class="bi bi-journal-text" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../docs/discussion/index.html">Discussion</a></li><li class="breadcrumb-item"><a href="../../docs/discussion/student_allocation.html">The student-allocation problem</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../docs/discussion/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Discussion</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/discussion/hospital_resident.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The hospital-resident assignment problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/discussion/other_packages/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Other packages</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/discussion/stable_marriage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The stable marriage problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/discussion/stable_roommates.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">The stable roommates problem</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../docs/discussion/student_allocation.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">The student-allocation problem</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#student-allocation" id="toc-student-allocation" class="nav-link active" data-scroll-target="#student-allocation">The student-allocation problem</a>
  <ul class="collapse">
  <li><a href="#key-definitions" id="toc-key-definitions" class="nav-link" data-scroll-target="#key-definitions">Key definitions</a>
  <ul class="collapse">
  <li><a href="#the-game" id="toc-the-game" class="nav-link" data-scroll-target="#the-game">The game</a></li>
  <li><a href="#matching" id="toc-matching" class="nav-link" data-scroll-target="#matching">Matching</a></li>
  <li><a href="#blocking-pair" id="toc-blocking-pair" class="nav-link" data-scroll-target="#blocking-pair">Blocking pair</a></li>
  </ul></li>
  <li><a href="#an-example" id="toc-an-example" class="nav-link" data-scroll-target="#an-example">An example</a></li>
  <li><a href="#the-algorithm" id="toc-the-algorithm" class="nav-link" data-scroll-target="#the-algorithm">The algorithm</a>
  <ul class="collapse">
  <li><a href="#student-optimal" id="toc-student-optimal" class="nav-link" data-scroll-target="#student-optimal">Student-optimal</a></li>
  <li><a href="#supervisor-optimal" id="toc-supervisor-optimal" class="nav-link" data-scroll-target="#supervisor-optimal">Supervisor-optimal</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="student-allocation" class="level1">
<h1>The student-allocation problem</h1>
<p>The student-allocation problem (SA) is concerned with the allocation of students to projects and their supervisors.</p>
<p>In this kind of problem there are technically three sets of players, although supervisors and their projects act together as a set of players.</p>
<p>Supervisors hold preferences over the students and pass them onto their projects. Like HR, this set of players have capacities, allowing for projects of different sizes and offering flexibility to supervisors.</p>
<section id="key-definitions" class="level2">
<h2 class="anchored" data-anchor-id="key-definitions">Key definitions</h2>
<section id="the-game" class="level3">
<h3 class="anchored" data-anchor-id="the-game">The game</h3>
<p>Consider three distinct sets, <span class="math inline">\(S\)</span>, <span class="math inline">\(P\)</span> and <span class="math inline">\(U\)</span>, and let us refer to them as students, projects and supervisors. Each project <span class="math inline">\(p \in P\)</span> has a single supervisor <span class="math inline">\(u \in U\)</span> associated with them. This association is described as a surjective function <span class="math inline">\(L: P \to U\)</span> where the supervisor <span class="math inline">\(u \in U\)</span> for a project <span class="math inline">\(p \in P\)</span> can be written as <span class="math inline">\(L(p) = u\)</span>. Note that as <span class="math inline">\(L\)</span> is surjective, <span class="math inline">\(u\)</span> may have multiple projects associated with them and we denote their set of projects as <span class="math inline">\(L^{-1}(u)\)</span>.</p>
<p>In addition to this, each project <span class="math inline">\(p \in P\)</span> and supervisor <span class="math inline">\(u \in U\)</span> has a capacity associated with them, denoted <span class="math inline">\(c_p, c_u \in \mathbb{N}\)</span> respectively. We assume that for each <span class="math inline">\(u \in U\)</span> the following holds:</p>
<p><span class="math display">\[\max\left\{ c_p \ | \ p \in L^{-1}(u) \right\}
\leq c_u \leq
\sum_{p \in L^{-1}(u)} c_p\]</span></p>
<p>That is, a supervisor must be able to accommodate their largest project but not offer more spaces than their projects sum to.</p>
<p>As with other matching games, each player has a preference list associated with them. In the case of SA, we have the following constraints on those preferences:</p>
<ul>
<li>Each student <span class="math inline">\(s \in S\)</span> must rank a non-empty subset of <span class="math inline">\(P\)</span>. We denote this preference by <span class="math inline">\(f(s)\)</span>.</li>
<li>Each supervisor <span class="math inline">\(u \in U\)</span> must rank <strong>all</strong> those students that have ranked <strong>at least one</strong> of their projects. That is, the preference list of <span class="math inline">\(u\)</span>, denoted <span class="math inline">\(g(u)\)</span>, is a permutation of the set given by <span class="math inline">\(\left\{ s \in S \ | \ L^{-1}(u) \cap f(s) \neq \emptyset \right\}\)</span>. If no students have ranked any of a supervisor's projects then that supervisor is removed from <span class="math inline">\(U\)</span>.</li>
<li>The preference list of a project <span class="math inline">\(p \in P\)</span> is governed by its supervisor <span class="math inline">\(u = L(p)\)</span>. We denote this preference as <span class="math inline">\(g_p(u)\)</span> and it is simply <span class="math inline">\(g(u)\)</span> without the students who did not rank <span class="math inline">\(p\)</span>. If no students have ranked a project then that project is removed from <span class="math inline">\(P\)</span>.</li>
</ul>
<p>This construction of students, projects, supervisors, associations, capacities and preference lists is a game and is denoted by <span class="math inline">\((S,P,U)\)</span>. This game is used to model instances of SA.</p>
</section>
<section id="matching" class="level3">
<h3 class="anchored" data-anchor-id="matching">Matching</h3>
<p>A matching <span class="math inline">\(M\)</span> is any mapping between <span class="math inline">\(S\)</span> and <span class="math inline">\(P\)</span>. If a pair <span class="math inline">\((s, p) \in S \times P\)</span> are matched in <span class="math inline">\(M\)</span>, we say that <span class="math inline">\(M(s) = p\)</span> and <span class="math inline">\(s \in M^{-1}(p)\)</span>. We also note that since each supervisor <span class="math inline">\(u \in U\)</span> oversees their projects (by definition), their matching can be referred to as the union of its projects' matchings:</p>
<p><span class="math display">\[M^{-1}(u) = \bigcup_{p \in L^{-1}(u)} M^{-1}(p) \subseteq S\]</span></p>
<p>A matching is only considered valid if <strong>all</strong> of the following are satisfied:</p>
<blockquote class="blockquote">
<ol type="1">
<li>For all <span class="math inline">\(s \in S\)</span> with a match we have <span class="math inline">\(M(s) \in f(s)\)</span>.</li>
<li>For all <span class="math inline">\(p \in P\)</span> we have <span class="math inline">\(M^{-1}(p) \subseteq g_p(u)\)</span> and <span class="math inline">\(|M^{-1}(p)| \leq c_p\)</span>.</li>
<li>For all <span class="math inline">\(u \in U\)</span> we have <span class="math inline">\(M^{-1}(u) \subseteq g(u)\)</span> and <span class="math inline">\(|M^{-1}(u)| \leq c_u\)</span>.</li>
</ol>
</blockquote>
<p>As always, a valid matching is considered stable if it does not contain any blocking pairs.</p>
</section>
<section id="blocking-pair" class="level3">
<h3 class="anchored" data-anchor-id="blocking-pair">Blocking pair</h3>
<p>A pair <span class="math inline">\((s, p)\)</span> is said to block a matching <span class="math inline">\(M\)</span> if <strong>all</strong> the following hold:</p>
<blockquote class="blockquote">
<ol type="1">
<li><p>The student has a preference of the project, i.e.&nbsp;<span class="math inline">\(p \in f(s)\)</span>.</p></li>
<li><p>Either <span class="math inline">\(s\)</span> is unmatched or they prefer <span class="math inline">\(p\)</span> to <span class="math inline">\(M(s) = p'\)</span>.</p></li>
<li><p>At least one of the following is true, where <span class="math inline">\(u = L(p)\)</span>:</p>
<blockquote class="blockquote">
<ul>
<li>Both <span class="math inline">\(p\)</span> and <span class="math inline">\(u\)</span> are under-subscribed, i.e. <span class="math inline">\(|M^{-1}(p)| &lt; c_p\)</span> and <span class="math inline">\(|M^{-1}(u)| &lt; c_u\)</span>.</li>
<li><span class="math inline">\(|M^{-1}(p)| &lt; c_p\)</span> and <span class="math inline">\(|M^{-1}(u)| = c_u\)</span>, and either <span class="math inline">\(M(s) = p' \in L^{-1}(u)\)</span> or <span class="math inline">\(u\)</span> prefers <span class="math inline">\(s\)</span> to their worst current match <span class="math inline">\(s' \in M^{-1}(u)\)</span>.</li>
<li><span class="math inline">\(|M^{-1}(p)| = c_p\)</span> and <span class="math inline">\(u\)</span> prefers <span class="math inline">\(s\)</span> to the project's worst student <span class="math inline">\(s \in M^{-1}(p)\)</span>.</li>
</ul>
</blockquote></li>
</ol>
</blockquote>
<p>The notion of preference is equivalent to that in SM.</p>
</section>
</section>
<section id="an-example" class="level2">
<h2 class="anchored" data-anchor-id="an-example">An example</h2>
<p>Consider the following instance of SA. There are five students - Avery, Blake, Cleo, Devon, Everest - in their final year of university. As part of this year, they may apply to do a project. There are two members of staff providing these projects - Dr.&nbsp;Xavier and Prof.&nbsp;Yeo. Each supervisor may take at most three students and each offer two projects with space for two students on each. The players' preferences are described in the graph below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/discussion/sa_matching.svg" class="align-center img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">image</figcaption>
</figure>
</div>
<p>Note that in this particular example, the students are ranked in the same order by both supervisors (as is often the case in real-world applications of SA). Now consider the matching below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/discussion/sa_invalid.svg" class="align-center img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">image</figcaption>
</figure>
</div>
<p>This matching is invalid, and none of the conditions for validity have been met. Specifically:</p>
<ul>
<li>Avery has been allocated Dr.&nbsp;Yeo's first project despite not ranking it (and likewise for Dr.&nbsp;Yeo and the project)</li>
<li>Dr.&nbsp;Yeo's first project has been allocated a total of three students which exceeds its capacity of two.</li>
<li>In addition to this, Dr.&nbsp;Yeo has been allocated a fourth student, violating their capacity constraint.</li>
</ul>
<p>With a few changes, we can make this matching valid. Swapping Avery and Cleo with Devon is a start since they are Dr.&nbsp;Xavier's favourite students after Blake. Then we can move Devon to Y2 as this is their most preferred project. Doing this gives the following matching:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/discussion/sa_unstable.svg" class="align-center img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">image</figcaption>
</figure>
</div>
<p>Unfortunately, and despite our efforts to accommodate people's preferences, this matching is not stable. Here we have two blocking pairs, <span class="math inline">\((E, X2)\)</span> and <span class="math inline">\((E, Y2)\)</span>. Although Everest prefers X1 to either of these projects, they do not form a blocking pair as X1 is full and Dr. Xavier prefers Avery and Cleo to Everest.</p>
<p>So, in order to overcome these blocking pairs without creating more, Devon must be swapped with Everest. This also feels like the fairest move given that Everest outranks Devon. The following graph displays this new, stable matching:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../assets/discussion/sa_stable.svg" class="align-center img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">image</figcaption>
</figure>
</div>
<p>It also happens that this matching is student-optimal as well as being stable and valid.</p>
</section>
<section id="the-algorithm" class="level2">
<h2 class="anchored" data-anchor-id="the-algorithm">The algorithm</h2>
<p>Finding stable and optimal solutions to SA is easily motivated since those solutions would solve the real-world problem they model. Actually implementing this in the real world is described in more detail in <a href="../../tutorials/student_allocation.ipynb">this tutorial</a>.</p>
<p>As with HR, there are two algorithms implemented in Matching to solve instances of SA, one to handle the optimality of each party (students and project/supervisors). These algorithms, taken from <code class="interpreted-text" role="cite">AIM07</code>, follow a similar structure to those for HR in that they take advantage of the inherent structure of the game. Again, each party-optimal algorithm provides a unique, stable matching for an instance of SA.</p>
<section id="student-optimal" class="level3">
<h3 class="anchored" data-anchor-id="student-optimal">Student-optimal</h3>
<ol start="0" type="1">
<li>Assign all students to be unmatched, and all supervisors (and their projects) to be totally unsubscribed.</li>
<li>Take any student <span class="math inline">\(s\)</span> that is unmatched and has a non-empty preference list, and consider their most preferred project <span class="math inline">\(p\)</span>. Let <span class="math inline">\(u = L(p)\)</span>. Assign <span class="math inline">\(s\)</span> to be matched to <span class="math inline">\(p\)</span> (and thus <span class="math inline">\(u\)</span>).</li>
<li>If <span class="math inline">\(p\)</span> is over-subscribed, find its worst current match <span class="math inline">\(s'\)</span>. Unmatch <span class="math inline">\(p\)</span> and <span class="math inline">\(s'\)</span>. Else if <span class="math inline">\(u\)</span> is over-subscribed, find their worst current match <span class="math inline">\(s'\)</span> and the project <span class="math inline">\(p'\)</span> that <span class="math inline">\(s'\)</span> is assigned to. Unmatch <span class="math inline">\(p'\)</span> and <span class="math inline">\(s'\)</span>.</li>
<li>If <span class="math inline">\(p\)</span> is at capacity, find their worst current match <span class="math inline">\(s'\)</span>. For each successor <span class="math inline">\(t \in g_p(u)\)</span> to <span class="math inline">\(s'\)</span>, delete the pair <span class="math inline">\((t, p)\)</span> from the game by removing <span class="math inline">\(p\)</span> from <span class="math inline">\(f(t)\)</span> and <span class="math inline">\(t\)</span> from <span class="math inline">\(g(u)\)</span> (and thus <span class="math inline">\(g_p(u)\)</span>).</li>
<li>If <span class="math inline">\(u\)</span> is at capacity, find their worst current match <span class="math inline">\(s'\)</span>. For each successor <span class="math inline">\(t \in g(u)\)</span> to <span class="math inline">\(s'\)</span>, delete the pair <span class="math inline">\((t, p)\)</span> from the game.</li>
<li>Go to 1 until there are no such students left, then end.</li>
</ol>
</section>
<section id="supervisor-optimal" class="level3">
<h3 class="anchored" data-anchor-id="supervisor-optimal">Supervisor-optimal</h3>
<ol start="0" type="1">
<li>Assign all students to be unmatched, and all supervisors (and their projects) to be totally unsubscribed.</li>
<li>Take any supervisor <span class="math inline">\(u\)</span> that is under-subscribed and whose preference list contains at least one student that is not currently matched to at least one acceptable (though currently under-subscribed) project offered by <span class="math inline">\(u\)</span>. Consider the supervisor's most preferred such student <span class="math inline">\(s\)</span> and that student's most preferred such project <span class="math inline">\(p\)</span>.</li>
<li>If <span class="math inline">\(s\)</span> is matched to some other project <span class="math inline">\(p'\)</span> then unmatch them.</li>
<li>Assign <span class="math inline">\(s\)</span> to be matched to <span class="math inline">\(p\)</span> (and thus <span class="math inline">\(u\)</span>).</li>
<li>For each successor <span class="math inline">\(p' \in f(s)\)</span> to <span class="math inline">\(p\)</span>, delete the pair <span class="math inline">\((s, p')\)</span> from the game.</li>
<li>Go to 1 until there are no such supervisors, then end.</li>
</ol>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Copyright, Henry Wilde 2023. Powered by <a href="https://quarto.org/docs/websites">Quarto</a> and <a href="https://diataxis.fr">Diátaxis</a>.</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>



</body></html>